1.1 引言
########

1964年，Amdahl等人把计算机体系结构定义为“程序员”能看到的计算机属性或特征，即计算机的概念性结构和功能性特征。本文遵循这个基本概念，主要是从软件程序员的视角来理解处理器内部结构和功能特征。

按照计算机软件层次结构，在不同软件层次上开发的程序员所看到的计算机有不同的属性。计算机体系结构也可以理解为，计算机硬件系统为了软件能正确运行而提供的二进制接口。开源Linux的内核在arch目录中支持了当前主流的处理器体系结构，其中包括x86、arm、arm64、powerpc、mips、sparc和riscv等等。本书所讨论的处理器体系结构，专指使用汇编语言和C语言开发的程序员理解到的处理器内部结构和功能特征。

处理器体系结构的发展在空间和时间两个维度上应该具有良好稳定性和兼容性。

随着处理器研发能力的提升，处理器性能会越来越高，应用领域也会越来越广，系列产品类型越来多，具有相同体系结构的处理器给软件提供的二进制接口基本一致。如果一个二进制软件可以直接运行在两台计算机系统之上，而且无论各自花费多少运行时间，所获得的结果完全相同，那么这两台计算机系统具有相同的处理器体系结构。也就是说，具有相同处理器体系结构的计算机硬件系统，软件运行结果是确定的、一致的；软件运行的速度主要取决于计算机硬件组成和实现技术。

国产飞腾系列处理器是飞腾信息技术有限公司研制的国产高性能、低功耗通用计算型系列微处理器，目前主要包括腾云S系列的高性能服务器处理器、腾锐D系列的高效能桌面处理器和腾珑E系列高端嵌入式处理器。这三大系列处理器都遵循ARMv8-A标准，具有相同的处理器体系结构。

为了追求对软件的兼容性而要求处理器体系结构永不改变，这会妨碍处理器体系结构的发展；随着新技术出现，处理器体系结构也在不停的扩展中，只是这种扩展通常要考虑以前软件的兼容性，要保证在上一代体系结构标准的机器上开发调试的软件能直接在新一代体系结构标准的机器上运行。这样一来，在新一代体系结构标准的处理器上适配过的软件，可能不能正确运行在上一代体系结构标准的处理器上。

在不考虑操作系统和库的条件下，在飞腾FT1500A系列上一代处理器上适配过的软件，可以直接运行在飞腾FT2000系列的新一代处理器上，甚至更新的飞腾处理器上；但是反过来，在新一代飞腾处理器上适配过的软件，在老一代飞腾处理器上就不一定能直接运行。


从处理器设计者角度来看计算机体系结构。计算机体系结构涉及到以下内容：

1. 数据表示
2. 寻址模式
3. 寄存器定义
4. 指令集
5. 处理器状态

这些内容表面上看似相互独立，实际上相互之间的关联性和依赖性很大。例如指令集依赖数据表示、寻址模式和寄存器定义等等；处理器状态又与寄存器定义、指令集、中断子系统密切相关；中断子系统又是I/O子系统的重要组成部分。
